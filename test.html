<div id="checkoutContainer" style="max-width:500px; margin:20px auto; background:#fff; padding:20px; border-radius:12px; box-shadow:0 5px 15px rgba(0,0,0,0.1); font-family:Arial,sans-serif;">
    <h2 style="text-align:center; color:#1e3a8a;">ğŸ›’ Checkout Ø§Ù„Ø¨Ù„ÙˆÙƒ ØªØ´ÙŠÙ†</h2>

    <!-- Ù…Ù„Ø®Øµ Ø§Ù„Ù…Ù†ØªØ¬ -->
    <div style="margin:20px 0; border-bottom:1px solid #e5e7eb; padding-bottom:10px;">
        <h3 id="productName" style="margin:0; color:#1e3a8a;">Ù…Ù†ØªØ¬ ØªØ¬Ø±ÙŠØ¨ÙŠ</h3>
        <p id="productPrice" style="margin:5px 0 0 0; font-weight:bold; color:#374151;">ğŸ’° Ø§Ù„Ø³Ø¹Ø±: 0.01 ETH</p>
    </div>

    <!-- Ø²Ø± Ø§Ù„Ø§ØªØµØ§Ù„ -->
    <button id="connectBtn" style="width:100%; padding:12px; border:none; border-radius:8px; font-size:16px; background:#2563eb; color:white; cursor:pointer;">ğŸ”— Connect Wallet</button>

    <!-- Ø²Ø± Ø§Ù„Ø¯ÙØ¹ -->
    <button id="payBtn" style="width:100%; padding:12px; border:none; border-radius:8px; font-size:16px; background:#10b981; color:white; cursor:pointer; display:none; margin-top:10px;">ğŸ›’ Ø¯ÙØ¹ Ø¹Ø¨Ø± Ø§Ù„Ø¨Ù„ÙˆÙƒ ØªØ´ÙŠÙ†</button>

    <!-- Ø­Ø§Ù„Ø© Ø§Ù„Ø¯ÙØ¹ -->
    <div id="statusMessage" style="text-align:center; margin-top:15px; font-weight:bold; color:#064e3b;"></div>
</div>

<!-- Ù…ÙƒØªØ¨Ø© Ethers.js -->
<script src="https://cdn.jsdelivr.net/npm/ethers@6.11.1/dist/ethers.umd.min.js"></script>

<script>
const contractAddress = "YOUR_CONTRACT_ADDRESS_HERE"; // Ø¶Ø¹ Ù‡Ù†Ø§ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¹Ù‚Ø¯
const contractABI = [ /* Ø¶Ø¹ Ù‡Ù†Ø§ ABI ÙƒØ§Ù…Ù„ */ ];

let provider, signer, contract;
let productId = 1;                  // Ø±Ù‚Ù… Ø§Ù„Ù…Ù†ØªØ¬
let productPrice = ethers.parseEther("0.01"); // Ø³Ø¹Ø± Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ø§Ù„Ù€ ETH

const connectBtn = document.getElementById("connectBtn");
const payBtn = document.getElementById("payBtn");
const statusMessage = document.getElementById("statusMessage");

// ğŸ”¹ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ù…Ø­ÙØ¸Ø©
connectBtn.addEventListener("click", async () => {
    if (!window.ethereum) {
        alert("âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ«Ø¨ÙŠØª MetaMask Ø£ÙˆÙ„Ù‹Ø§!");
        return;
    }

    try {
        provider = new ethers.BrowserProvider(window.ethereum);
        await provider.send("eth_requestAccounts", []);
        signer = await provider.getSigner();
        contract = new ethers.Contract(contractAddress, contractABI, signer);

        const address = await signer.getAddress();
        statusMessage.textContent = `ğŸŸ¢ Ù…ØªØµÙ„ Ø¨Ø§Ù„Ù…Ø­ÙØ¸Ø©: ${address}`;

        connectBtn.style.display = "none";
        payBtn.style.display = "block";
    } catch (err) {
        console.error(err);
        statusMessage.textContent = `âŒ Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø§ØªØµØ§Ù„: ${err.message}`;
    }
});

// ğŸ”¹ Ø§Ù„Ø¯ÙØ¹ Ø¹Ø¨Ø± Ø§Ù„Ø¨Ù„ÙˆÙƒ ØªØ´ÙŠÙ†
payBtn.addEventListener("click", async () => {
    if (!contract) {
        alert("âš ï¸ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¹Ù‚Ø¯!");
        return;
    }

    try {
        statusMessage.textContent = "â³ Ø¬Ø§Ø±ÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¯ÙØ¹...";
        const tx = await contract.buyProduct(productId, { value: productPrice });
        await tx.wait();
        statusMessage.textContent = "âœ… ØªÙ…Øª Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¯ÙØ¹ Ø¨Ù†Ø¬Ø§Ø­!";
    } catch (err) {
        console.error(err);
        statusMessage.textContent = `âŒ Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¯ÙØ¹: ${err.message}`;
    }
});
</script>
